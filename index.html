<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="CSS/Luffy.css">
    <link rel="alternate" type="application/rss+xml" title="Feed RSS de One Piece" href="RSS/rss.xml">
    <title>Luffy</title>
</head>
<body>
    <header id="inicio">
    <nav>
        <div id="nav" class="menu">
            <a href="#inicio">
                <img class="logo" src="img/One-Piece-Logo.png">
            </a>
            
            <ul class="menu-lista">
              <li><a href="#historia">Historia</a></li>
              <li><a href="#">Transformaciones</a></li>
            </ul>
            <a href="RSS/rss.xml">
                <img class="rssimg" src="img/rss.png">
            </a>
        </div>
    </header>
    </nav> 
    <br>
    <main>
    <div>
        <div>
            <div id="historia">
                <h2>Historia</h2>
                <p>Monkey D. Luffy, más conocido como Luffy «Sombrero de Paja», es el protagonista principal de la serie de manga y anime One Piece. 
                    Es el capitán y fundador de los Piratas de Sombrero de Paja así como un de los Cuatro Emperadores que gobiernan los mares del Nuevo Mundo. Comió una fruta del diablo llamada fruta Gomu Gomu, 
                    que le convirtió en un hombre de goma. Además de esto, posee varias habilidades que le hacen ser un pirata más que especial; un gran ejemplo de ello es la capacidad de usar el haoshoku haki
                    ―que sólo lo posee una persona dentro de un millón― y poseer también los otros dos tipos de haki.
                    <br>
                    <br>
                    Luffy pertenece a una familia plagada de personajes conocidos mundialmente: es hijo del líder del Ejército Revolucionario y criminal más buscado del mundo, Monkey D. Dragon; 
                    nieto del héroe de la Marina y anterior vicealmirante Monkey D. Garp, hermano adoptivo del conocido pirata Ace "Puño de Fuego" ―antiguo comandante de la segunda división de los Piratas de Barbablanca―, 
                    así como del oficial general del Ejército Revolucionario, Sabo. Su objetivo en la vida es convertirse en el próximo Rey de los Piratas, encontrar el legendario tesoro conocido como el "One Piece", 
                    que perteneció al anterior Rey de los Piratas Gol D. Roger, y conquistar el Nuevo Mundo liderando una tripulación formada por grandes piratas.
                </p>
            </div>
            <br>
            <div id="informacion"></div>
            <button onclick="cargarxsl()">Tiempo</button>
            <div id="luffyInfo"></div>
        </div>

            <div id="Transformaciones">
                <h2>Transformaciones</h2>
                <div class="gear2">
                    
                    <img src="img/luffy gear 2.png" class="gear2img">
                    <p class="gear22">El Gear Second o Segunda Marcha es una transformación de Luffy que le permite acelerar 
                        la circulación de la sangre por todo su cuerpo, logrando que obtenga mejoras en su agilidad, velocidad y potencia. 
                        Y gracias al funcionamiento de esta técnica, la piel de Luffy se vuelve más rojiza y desprende vapor.
                        Esta forma de Luffy está más optimizada en la velocidad, lo que le permitió superar a muchos de sus oponentes y atacar antes que estos. 
                        Además de que su fuerza se ve incrementada. 
                   </p>
                    <br>
                    <audio  controls id="music">
                        <source src="audio/gear2.mp3" type="audio/mp3">    
                    </audio>
                </div>
                
                <div class="gear3">
                    <img src="img/luffy_gear3.jpg" class="gear3img">
                    <p class="gear33">El Gear Third o tercera Marcha se centra más en la fuerza y poder destructivo. 
                        En esta forma, Luffy infla sus huesos para que sus extremidades, o el cuerpo completo, crezca de forma enorme y poder atacar con mucha potencia.
                        Sin embargo, antes del salto temporal, cada vez que Luffy utilizaba el Gear Third, tenía como consecuencia una reducción considerable de tamaño,
                        volviéndose enano durante algunos minutos. Aunque con el tiempo este problema ha dejado de existir.
                    </p>
                    <audio controls id="music">
                        <source src="audio/gear3.mp3" type="audio/mp3">    
                    </audio>
                </div>
                <div class="gear4bounceman" id="bounceman">
                    <img src="img/luffy_gear4_bounceman.jpg" class="gear4bouncemanimg">
                    <p>
                        La primera forma del gear 4 se llama boundman,con esta forma su cuerpo adopta una apariencia más redonda, y es imbuido en haki de armadura. 
                        También se vuelve físicamente más alto, alcanzando de pie los cuatro metros de altura. Como efecto secundario, es incapaz de quedarse quieto en el suelo, y en su lugar constantemente rebota en el acto. 
                        También en esta forma es capaz de volar gracias a la propulsión elástica de la goma.
                    <br>
                        La principal fortaleza de esta transformación, es que, le convierte en un «hombre-rebote», siendo capaz de contraer sus extremidades para aumentar la potencia de sus golpes como si se tratara de un muelle o un resorte.
                        Esta transformación no solo aumenta el tamaño de su cuerpo, sino también su elasticidad, utilizando el busoshoku haki para incrementar la tensión de la goma, manteniendo su cuerpo duro y con las capacidades elásticas propias de la fruta Gomu Gomu. 
                        Debido a su capacidad de hacer que su puño sea un resorte, puede cambiar la dirección de este hasta conseguir golpear a su adversario. También su fuerza y velocidad se incrementan.
                    </p>
                    <audio controls id="music">
                        <source src="audio/gear4 bounce man.mp3" type="audio/mpeg">    
                    </audio>
                </div>
                
                <div class="gear4tankman" id="tankman">
                    <img src="img/gear4tankman.png" class="gear4tankmanimg">
                    <p>
                         La segunda forma del gear 4 conocida como tankman, en esta forma recuerda a un luchador de sumo pero de proporciones exageradas: los músculos de sus brazos y piernas crecen ligeramente, 
                         mientras que su torso recubierto con haki de armadura llega a ser muy grande y redondo, aunque musculoso en la parte superior.
                        <br>
                        El tankman dota al cuerpo de Luffy de una increíble dureza gracias al haki. Además, esta forma incrementa la magnitud y el poder de la ofensiva basada en la compresión de la goma de la forma 
                        boundman usando el enorme estómago de Luffy como lanzadera.
                    </p>
                    <audio controls id="music">
                        <source src="audio/gear4tankman.mp3" type="audio/mpeg">    
                    </audio>
                </div>
                <div class="gear4snakeman" id="snakeman">
                    <img src="img/luffy_gear4_snakeman.jpg" class="gear4snakemanimg">
                    <p>
                        La tercera forma del gear 4 conocida como snakeman, En esta forma, Luffy aumenta significativamente, 
                        a costa de perder la capacidad de rebotar en el aire, su velocidad y mejora su «python» para cambiar sus brazos de dirección a cada golpe, lo cual es capaz también de realizar en su forma boundman. 
                        No obstante, con el snakeman, sus ataques incrementen su velocidad cuanto cambios de dirección realicen; permitiendo a Luffy no solo atacar ferozmente a un enemigo que sea capaz de evitarlo, sino aumentar la velocidad y potencia del ataque hasta que llegue a su objetivo. 
                        Además de todo ello, es capaz de atacar a un oponente desde cualquier dirección con facilidad. Esta forma también le permite saltar grandes alturas.
                    </p>
                    <audio controls id="music">
                        <source src="audio/gear4snakeman.mp3" type="audio/mpeg">    
                    </audio>
                </div>
                <button onclick="cambiarContenedor()">Cambiar gear4</button>
                <div class="gear5">
                    <img src="img/luffy_gear5.jpg" class="gear5img">
                    <p>
                        El gear 5 es una técnica creada como resultado del despertar de la fruta Gomu Gomu de Luffy. En esta forma el cuerpo de Luffy, de por sí gomoso, adquiere una fuerza, una libertad y una durabilidad que superan las de sus formas anteriores, 
                        hasta el punto de que ahora es incluso caricaturescamente maleable.Le permite utilizar tanto el inflado de extremidades del gear 3 como el inflado muscular del gear 4 pero sin bombear aire físicamente en su cuerpo, así como le da la capacidad de elastificar y estirar el terreno a su alrededor.
                        La mayor aplicación de esta forma hasta el momento parece ser una combinación del cuerpo de goma caricaturescamente maleable del consumidor y el efecto del despertar sobre la materia orgánica, ya que la combinación del poder permite al consumidor un método de ataque poco ortodoxo, 
                        permitiéndole aparentemente estirarse «a través» de lo que sea o de quien sea. Ademas esta forma le permite utilizar los 3 tipos de hakis avanazados a la vez con bastante facilidad.
                    </p>
                    <audio controls id="music">
                        <source src="audio/Gear 5.mp3" type="audio/mpeg">    
                    </audio>
                </div>

            </div>
    </div>
    <br>
    <div>
        <form id="contactForm" action="#" method="post">
            <label for="name">Nombre:</label>
            <input type="text" id="nameInput">
            <button onclick="predictGender()">Predecir género</button>
            <p id="result"></p>
            <br><br>
            
            <label for="email">Email:</label>
            <input type="text" id="email" name="email">
            <span class="error" id="emailError">*</span>
            <br><br>

            <label for="password">Contraseña:</label>
            <input type="password" id="password" name="password">
            <span class="error" id="passwordError">*</span>
            <br><br>
            
            <label for="confirmPassword">Confirmar Contraseña:</label>
            <input type="password" id="confirmPassword" name="confirmPassword">
            <span class="error" id="confirmPasswordError">*</span>
            <br><br>
            
            <label for="message">Mensaje:</label>
            <br>
            <textarea id="message" name="message" rows="4" cols="30"></textarea>
            <span class="error" id="messageError">*</span>
            <br><br>
            
            <input type="submit" value="Enviar">
        </form>
    </div>
    
    <button onclick="cargarXML()">Cargar XML</button>
    <div id="resultado"></div>


    
    </main>

        <script>
            //Funcion para cambiar contenedores entre otros
        function cambiarContenedor() {
            var contenedor1 = document.getElementById("bounceman");
            var contenedor2 = document.getElementById("tankman");
            var contenedor3 = document.getElementById("snakeman");
            
            if (contenedor1.style.display != "none") {
                contenedor1.style.display = "none";
                contenedor2.style.display = "block";
                contenedor3.style.display = "none";
            } else if(contenedor2.style.display != "none") {
                contenedor1.style.display = "none";
                contenedor2.style.display = "none";
                contenedor3.style.display = "block";
            }else{
                contenedor1.style.display = "block";
                contenedor2.style.display = "none";
                contenedor3.style.display = "none";
            }
        }
        //Funcion para que al darle al play reproduzca audio
        var myMusic = document.getElementById("music");
        function play() {
        myMusic.play();
        }

        //Funcion para validar formulario
        function validateForm() {
        var email = document.getElementById("email").value;
        var message = document.getElementById("message").value;
        var password = document.getElementById("password").value;
        var confirmPassword = document.getElementById("confirmPassword").value;
        var isValid = true;

        
        document.getElementById("emailError").innerHTML = "";
        document.getElementById("messageError").innerHTML = "";
        document.getElementById("passwordError").innerHTML = "";
        document.getElementById("confirmPasswordError").innerHTML = "";

        if (email === "") {
            document.getElementById("emailError").innerHTML = "Campo obligatorio";
            isValid = false;
        } else {
            var emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailPattern.test(email)) {
                document.getElementById("emailError").innerHTML = "Email inválido";
                isValid = false;
            }
        }
        if (password === "") {
            document.getElementById("passwordError").innerHTML = "Campo obligatorio";
            isValid = false;
        } else {
            //(?=.*\d): Es una expresión de "búsqueda positiva anticipada" que busca al menos un dígito (\d) en cualquier parte de la cadena.
            var passwordPattern = /^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$%^&*()_+])[0-9a-zA-Z!@#$%^&*()_+]{8,}$/;
            if (!passwordPattern.test(password)) {
                document.getElementById("passwordError").innerHTML = "La contraseña debe tener al menos 8 caracteres, incluyendo al menos una letra mayúscula, una letra minúscula, un número y un carácter especial";
                isValid = false;
            }
        }
        if (confirmPassword === "") {
            document.getElementById("confirmPasswordError").innerHTML = "Campo obligatorio";
            isValid = false;
        } else if (password !== confirmPassword) {
            document.getElementById("confirmPasswordError").innerHTML = "Las contraseñas no coinciden";
            isValid = false;
        }
        if (message === "") {
            document.getElementById("messageError").innerHTML = "Campo obligatorio";
            isValid = false;
        }

        return isValid;
    }

    document.getElementById("contactForm").addEventListener("submit", function(event) {
        if (!validateForm()) {
            event.preventDefault();
        }
    });
        
    
    //json
    document.addEventListener("DOMContentLoaded", function() {
    var xhr = new XMLHttpRequest();
    xhr.open("GET", "json/luffy.json", true);
    xhr.onreadystatechange = function() {
        if (xhr.readyState === 4) {
        if (xhr.status === 200) {
            var data = JSON.parse(xhr.responseText);
            mostrarInformacion(data);
        } else {
            document.getElementById("informacion").textContent = "Error al cargar el archivo JSON.";
        }
        }
    };
    xhr.send();
    });

    function mostrarInformacion(data) {
    var biografia = data.Luffy.Biografia;
    var transformaciones = data.Luffy.transformaciones;

    var informacionHTML = '<h2>Biografía</h2>';
    informacionHTML += '<p><strong>Título:</strong> ' + biografia.titulo + '</p>';
    informacionHTML += '<p><strong>Nombre:</strong> ' + biografia.nombre + '</p>';
    informacionHTML += '<p><strong>Cumpleaños:</strong> ' + biografia.cumpleanos + '</p>';
    informacionHTML += '<p><strong>Tripulación:</strong> ' + biografia.tripulacion + '</p>';

    informacionHTML += '<h2>Transformaciones</h2>';
    informacionHTML += '<ul>';
    for (var key in transformaciones) {
        if (transformaciones.hasOwnProperty(key)) {
        informacionHTML += '<li><strong>' + key + ':</strong> ' + transformaciones[key] + '</li>';
        }
    }
    informacionHTML += '</ul>';

    document.getElementById("informacion").innerHTML = informacionHTML;
    }

        //Funcion para cargar xsl
    var xmlhttp = new XMLHttpRequest();
        xmlhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
            displayWeather(this);
        }
    };
    
    xmlhttp.open("GET", "xml/xml_tiempo.xml", true);
    xmlhttp.send();
    

    function displayWeather(xml) {
        var xsl = new XMLHttpRequest();
        xsl.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
                var xslDoc = this.responseXML;
                var xmlDoc = xml.responseXML;
                var xsltProcessor = new XSLTProcessor();
                xsltProcessor.importStylesheet(xslDoc);
                var resultDocument = xsltProcessor.transformToFragment(xmlDoc, document);
                document.getElementById("luffyInfo").appendChild(resultDocument);
            }
        };
        xsl.open("GET", "xml/xsl proyecto.xsl", true);
        xsl.send();
    }
        
  
        //Funcion para cargar Xml

        function cargarXML() {
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
                procesarXML(this);
            }
        };
        xhttp.open("GET", "xml/xml_proyecto.xml", true);
        xhttp.send();
    }
        //Funcion para procesar el xml

        function procesarXML(xml) {
        var xmlDoc = xml.responseXML;
        var biografia = xmlDoc.getElementsByTagName("Biografia")[0];
        var titulo = biografia.getElementsByTagName("titulo")[0].childNodes[0].nodeValue;
        var nombre = biografia.getElementsByTagName("nombre")[0].childNodes[0].nodeValue;
        var cumpleanos = biografia.getElementsByTagName("cumpleanos")[0].childNodes[0].nodeValue;
        var tripulacion = biografia.getElementsByTagName("tripulacion")[0].childNodes[0].nodeValue;
        var transformaciones = xmlDoc.getElementsByTagName("transformaciones")[0].childNodes;
        
        var resultado = document.getElementById("resultado");
        resultado.innerHTML = "<h2>" + titulo + "</h2>";
        resultado.innerHTML += "<p>Nombre: " + nombre + "</p>";
        resultado.innerHTML += "<p>Cumpleaños: " + cumpleanos + "</p>";
        resultado.innerHTML += "<p>Tripulación: " + tripulacion + "</p>";
        
        resultado.innerHTML += "<h3>Transformaciones:</h3>";
        for (var i = 0; i < transformaciones.length; i++) {
            if (transformaciones[i].nodeType == 1) { 
                var nombreTransformacion = transformaciones[i].nodeName;
                var descripcionTransformacion = transformaciones[i].childNodes[0].nodeValue;
                resultado.innerHTML += "<p>" + nombreTransformacion + ": " + descripcionTransformacion + "</p>";
            }
        }
    }
    //API
    function predictGender() {
    const name = document.getElementById('nameInput').value;
    const url = `https://api.genderize.io?name=${name}`;

    fetch(url)
        .then(response => response.json())
        .then(data => {
            document.getElementById('result').textContent = `La prediccion de genero del nombre "${name}" es: ${data.gender}`;
        })
        
    }

    //RSS
    

    </script>
    <script type="text/javascript" src="https://feed.mikle.com/js/fw-loader.js" 
    preloader-text="Cargando" data-fw -param="167319/">
    </script>
</body>
</html>